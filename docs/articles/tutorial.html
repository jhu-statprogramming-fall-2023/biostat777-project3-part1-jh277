<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="package.final">
<title>package.final Tutorial • package.final</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Montserrat-0.4.7/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="package.final Tutorial">
<meta property="og:description" content="package.final">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">package.final</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Example_analysis.html">Example analysis</a>
    <a class="dropdown-item" href="../articles/tutorial.html">package.final Tutorial</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="tutorial_files/kePrint-0.0.1/kePrint.js"></script><link href="tutorial_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>package.final Tutorial</h1>
                        <h4 data-toc-skip class="author">Jiaxin Huang
&amp; Hanmo Li</h4>
            
      
      
      <div class="d-none name"><code>tutorial.Rmd</code></div>
    </div>

    
    
<p>The <strong>package.final</strong> package is build to provide a
suite of useful tools to help with statistical inference and prediction.
This package includes functions that perform hypothesis testing, linear
regression, and k-nearest neighbor cross-validation test. Below is a
concise guide of what the package can do for you.</p>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">package.final</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span></code></pre></div>
<p>Before diving into the technical part of this tour, let’s first look
at the <strong>my_penguins</strong> dataset will be using throughout the
entire guide.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">my_penguins</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Adelie  Torgersen           39.1          18.7               181        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Adelie  Torgersen           39.5          17.4               186        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Adelie  Torgersen           40.3          18                 195        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Adelie  Torgersen           <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span>                  <span style="color: #BB0000;">NA</span>          <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Adelie  Torgersen           36.7          19.3               193        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Adelie  Torgersen           39.3          20.6               190        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</span></span></span></code></pre></div>
<p>We can see that there are NAs in the my_penguins dataset. To properly
use the package for all variables, we need to first clean the dataset
using <em>na.omit()</em>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">peng_clean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">my_penguins</span><span class="op">)</span></span>
<span><span class="va">peng_clean</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 333 × 8</span></span></span>
<span><span class="co">#&gt;    species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Adelie  Torgersen           39.1          18.7               181        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Adelie  Torgersen           39.5          17.4               186        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Adelie  Torgersen           40.3          18                 195        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Adelie  Torgersen           36.7          19.3               193        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Adelie  Torgersen           39.3          20.6               190        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Adelie  Torgersen           38.9          17.8               181        <span style="text-decoration: underline;">3</span>625</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Adelie  Torgersen           39.2          19.6               195        <span style="text-decoration: underline;">4</span>675</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Adelie  Torgersen           41.1          17.6               182        <span style="text-decoration: underline;">3</span>200</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Adelie  Torgersen           38.6          21.2               191        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Adelie  Torgersen           34.6          21.1               198        <span style="text-decoration: underline;">4</span>400</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 323 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</span></span></span></code></pre></div>
<p>Remember, we should <strong>always</strong> use
<strong>clean</strong> data in order to properly use this package. For
the rest of the guide, we will be using <strong>peng_clean</strong>, a
clean version of <em>my_penguins</em> dataset.</p>
</div>
<div class="section level2">
<h2 id="hypothesis-testing-my_t-test">Hypothesis testing &amp; my_t.test<a class="anchor" aria-label="anchor" href="#hypothesis-testing-my_t-test"></a>
</h2>
<p><strong>my_t.test</strong> function performs a one sample t-test on
vectors of data.</p>
<p>After having a grasp of the dataset, let’s start analyzing the data
by answering the question “Is the population mean of bill length greater
than 40.”</p>
<p><strong>my_t.test</strong> function comes in use. In this case, the
null hypothesis is that the true population mean of bill length is equal
to 40 (<span class="math inline">\(H_0 : {\mu} = 40\)</span>), while the
alternative hypothesis is that the true population mean of bill length
is greater than 40 (<span class="math inline">\(H_1 : {\mu} &gt;
40\)</span>).</p>
<p>Run the t-test using <strong>my_t.test</strong> function:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/my_t.test.html">my_t.test</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">peng_clean</span><span class="op">$</span><span class="va">bill_length_mm</span>, alternative <span class="op">=</span> <span class="st">"greater"</span>, mu <span class="op">=</span> <span class="fl">40</span><span class="op">)</span></span>
<span><span class="co">#&gt; $test_stat</span></span>
<span><span class="co">#&gt; [1] 13.32347</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $df</span></span>
<span><span class="co">#&gt; [1] 332</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $alternative</span></span>
<span><span class="co">#&gt; [1] "greater"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $p_val</span></span>
<span><span class="co">#&gt; [1] 4.869297e-33</span></span></code></pre></div>
<p>The p-value is 4.869297e-33, which is saying that assuming the
population mean of bill length is equal to 40, the probability of
observing a test statistics at least as extreme as the one in our data
is 4.869297e-33. The p-value is much smaller than the alpha value 0.05.
Thus, we should reject the null hypothesis, and conclude that the mean
bill length is indeed greater than 40.</p>
</div>
<div class="section level2">
<h2 id="linear-regression-my_lm">Linear Regression &amp; my_lm<a class="anchor" aria-label="anchor" href="#linear-regression-my_lm"></a>
</h2>
<p><strong>my_lm</strong> function fits a linear regression model to
given data and helps us to assess the relationship between
variables.</p>
<p>Let’s look at the relationship between <em>body_mass_g</em>,
<em>bill_length_mm</em>, and <em>bill_depth_mm</em> from the
<strong>peng_clean</strong> data. Using <em>body_mass_g</em> as
dependent variable, <em>bill_length_mm</em> and <em>bill_depth_mm</em>
as independent variables, run <strong>my_lm</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/my_lm.html">my_lm</a></span><span class="op">(</span><span class="va">body_mass_g</span> <span class="op">~</span> <span class="va">bill_length_mm</span> <span class="op">+</span> <span class="va">bill_depth_mm</span>, <span class="va">peng_clean</span><span class="op">)</span></span></code></pre></div>
<table class="table table" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:right;">
Estimate
</th>
<th style="text-align:right;">
Std.Error
</th>
<th style="text-align:right;">
t.value
</th>
<th style="text-align:right;">
p.value
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept)
</td>
<td style="text-align:right;">
3413.45185
</td>
<td style="text-align:right;">
437.91130
</td>
<td style="text-align:right;">
7.794848
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
bill_length_mm
</td>
<td style="text-align:right;">
74.81263
</td>
<td style="text-align:right;">
6.07583
</td>
<td style="text-align:right;">
12.313153
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
bill_depth_mm
</td>
<td style="text-align:right;">
-145.50718
</td>
<td style="text-align:right;">
16.87289
</td>
<td style="text-align:right;">
-8.623725
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p>Let’s first look at the coefficients.</p>
<p>The coefficient of bill length is 74.81, which indicates the expected
increase in body mass is 74.81 grams for every millimeter increase in
bill length, holding all other covariates identical. This coefficient is
positive, so we can say that body mass and bill length are positively
correlated.</p>
<p>The coefficient of bill depth is -145.51, which indicates the
expected change in body mass is -145.51 grams for every millimeter
increase in bill depth, holding all other covariates identical. This
coefficient is negative, so we can say that body mass and bill depth are
negatively correlated.</p>
<p>Now, let’s look at the p-values. For each coefficient, the null
hypothesis being tested is: <span class="math inline">\(H_0: {\beta} =
0\)</span>.</p>
<p>We test the null hypothesis that there is no statistically
significant relationship between body mass and bill length. The p-value
is 0, which is less than <span class="math inline">\({\alpha} =
0.05\)</span>. Thus, we reject the null hypothesis, and conclude that
body mass and bill length are correlated.</p>
<p>We also test the null hypothesis that there is no significant
relationship between body mass and bill depth. Using <span class="math inline">\({\alpha} = 0.05\)</span>, we can see that the
p-value is less than this cut-off level, thus we should reject the null
hypothesis, and conclude that body mass and bill depth are
correlated.</p>
</div>
<div class="section level2">
<h2 id="k-nearest-neighbor-model-my_knn_cv">K-nearest neighbor model &amp; my_knn_cv<a class="anchor" aria-label="anchor" href="#k-nearest-neighbor-model-my_knn_cv"></a>
</h2>
<p><strong>my_knn_cv</strong> function performs k-nearest neighbors
cross-validation test to predict class using given covariates.</p>
<p>Let’s recall our dataset:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">peng_clean</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Adelie  Torgersen           39.1          18.7               181        <span style="text-decoration: underline;">3</span>750</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Adelie  Torgersen           39.5          17.4               186        <span style="text-decoration: underline;">3</span>800</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Adelie  Torgersen           40.3          18                 195        <span style="text-decoration: underline;">3</span>250</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> Adelie  Torgersen           36.7          19.3               193        <span style="text-decoration: underline;">3</span>450</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> Adelie  Torgersen           39.3          20.6               190        <span style="text-decoration: underline;">3</span>650</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> Adelie  Torgersen           38.9          17.8               181        <span style="text-decoration: underline;">3</span>625</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</span></span></span></code></pre></div>
<p>We want to predict <strong>species</strong> using covariates
<strong>bill_length_mm</strong>, <strong>bill_depth_mm</strong>,
<strong>fliper_length_mm</strong>, and <strong>body_mass_g</strong> from
training data <strong>peng_clean</strong>.</p>
<p>Let’s run <strong>my_knn_cv</strong> using <strong>k_nn = 2</strong>,
<strong>k_cv = 5</strong>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/my_knn_cv.html">my_knn_cv</a></span><span class="op">(</span><span class="va">peng_clean</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="va">peng_clean</span><span class="op">$</span><span class="va">species</span>, k_nn <span class="op">=</span> <span class="fl">2</span>, k_cv <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">my_result</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;   [1] Adelie    Adelie    Chinstrap Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;   [8] Adelie    Adelie    Adelie    Adelie    Adelie    Chinstrap Adelie   </span></span>
<span><span class="co">#&gt;  [15] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [22] Adelie    Adelie    Adelie    Adelie    Chinstrap Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [29] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [36] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [43] Adelie    Adelie    Adelie    Adelie    Adelie    Chinstrap Adelie   </span></span>
<span><span class="co">#&gt;  [50] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [57] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [64] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [71] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [78] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [85] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [92] Gentoo    Adelie    Adelie    Adelie    Gentoo    Adelie    Adelie   </span></span>
<span><span class="co">#&gt;  [99] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt; [106] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Chinstrap</span></span>
<span><span class="co">#&gt; [113] Adelie    Adelie    Adelie    Adelie    Adelie    Chinstrap Adelie   </span></span>
<span><span class="co">#&gt; [120] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Chinstrap</span></span>
<span><span class="co">#&gt; [127] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt; [134] Adelie    Chinstrap Adelie    Adelie    Adelie    Adelie    Adelie   </span></span>
<span><span class="co">#&gt; [141] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Gentoo   </span></span>
<span><span class="co">#&gt; [148] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [155] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [162] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [169] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [176] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [183] Gentoo    Adelie    Gentoo    Chinstrap Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [190] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [197] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [204] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [211] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [218] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [225] Gentoo    Gentoo    Adelie    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [232] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [239] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [246] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [253] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   </span></span>
<span><span class="co">#&gt; [260] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Chinstrap</span></span>
<span><span class="co">#&gt; [267] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Adelie    Chinstrap</span></span>
<span><span class="co">#&gt; [274] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap</span></span>
<span><span class="co">#&gt; [281] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Adelie    Chinstrap</span></span>
<span><span class="co">#&gt; [288] Adelie    Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Adelie   </span></span>
<span><span class="co">#&gt; [295] Gentoo    Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap</span></span>
<span><span class="co">#&gt; [302] Adelie    Chinstrap Chinstrap Gentoo    Chinstrap Chinstrap Adelie   </span></span>
<span><span class="co">#&gt; [309] Adelie    Chinstrap Adelie    Chinstrap Chinstrap Chinstrap Chinstrap</span></span>
<span><span class="co">#&gt; [316] Adelie    Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap</span></span>
<span><span class="co">#&gt; [323] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap</span></span>
<span><span class="co">#&gt; [330] Chinstrap Chinstrap Chinstrap Chinstrap</span></span>
<span><span class="co">#&gt; Levels: Adelie Chinstrap Gentoo</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] 0.2253279</span></span></code></pre></div>
<p>From the result, we can see a list of <em>species</em> and a number
indicating CV(cross-validation) misclassification error.</p>
<p>We can also use the result obtained from <strong>my_knn_cv</strong>
function to calculate training misclassification rate:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">my_result</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">!=</span> <span class="va">peng_clean</span><span class="op">$</span><span class="va">species</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.07207207</span></span></code></pre></div>
<p>Now, we know how to use the function. Next, let’s find out how does
the number of neighbors affects the training misclassification rate and
CV misclassification rate under 5-fold cross validation?”</p>
<p>We look at the misclassification rates for <strong>k_nn =
1-10</strong> under 5-fold cross validation <strong>k_cv = 5</strong>.
Let’s run <strong>my_knn_cv</strong> in a for-loop:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cv_errs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">training_errs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/my_knn_cv.html">my_knn_cv</a></span><span class="op">(</span><span class="va">peng_clean</span><span class="op">[</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span>, <span class="va">peng_clean</span><span class="op">$</span><span class="va">species</span>, k_nn <span class="op">=</span> <span class="va">i</span>, k_cv <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span>  <span class="va">cv_errs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">training_errs</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">peng_clean</span><span class="op">$</span><span class="va">species</span> <span class="op">!=</span> <span class="va">results</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">peng_clean</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">k_nn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">df_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">k_nn</span>, <span class="va">training_errs</span>, <span class="va">cv_errs</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">df_table</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:right;">
k_nn
</th>
<th style="text-align:right;">
training_errs
</th>
<th style="text-align:right;">
cv_errs
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.1919946
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.0660661
</td>
<td style="text-align:right;">
0.1983265
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.0810811
</td>
<td style="text-align:right;">
0.2371325
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0.1231231
</td>
<td style="text-align:right;">
0.2312528
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0.1651652
</td>
<td style="text-align:right;">
0.2130710
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.1531532
</td>
<td style="text-align:right;">
0.2612845
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.1531532
</td>
<td style="text-align:right;">
0.2075531
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0.1711712
</td>
<td style="text-align:right;">
0.2312981
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0.1771772
</td>
<td style="text-align:right;">
0.2369064
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0.1891892
</td>
<td style="text-align:right;">
0.2344188
</td>
</tr>
</tbody>
</table>
<p>What are some observations from the table we obtained? When k_nn = 1,
the model has the lowest training misclassification rate and CV
misclassification rate using 5-fold cross validation. I would choose
this model if our criteria is solely based on training misclassification
rates or CV misclassification rates.</p>
<p>However, it is very likely that we will end up with relatively high
testing error because the model (k_nn = 1) tends to overfit the training
data set. Thus, in practice, I would prefer models with k_nn ranging
from 5 to 10 because they add more flexibility when fitting data, while
maintaining relatively low error rates.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>NULL</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>NULL</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
